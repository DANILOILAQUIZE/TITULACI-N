{% extends "plantilla.html" %}
{% load static %}
{% block contenido %}
<!-- ... (previous content remains the same until line 680) -->
        $.ajax({
            url: '{% url "buscar_nombre_por_cedula" %}' || '/buscar_nombre_por_cedula/',
            data: { 'cedula': cedula },
            dataType: 'json',
            success: function(data) {
                if (data.nombre) {
                    $(`input[name="nombre_${tipo}"]`).val(data.nombre);
                    $(`input[name="cedula_${tipo}"]`).val(cedula);
                } else {
                    $(`input[name="nombre_${tipo}"]`).val('');
                    $(`input[name="cedula_${tipo}"]`).val('');
                    Swal.fire({
                        icon: 'warning',
                        title: 'No encontrado',
                        text: 'No se encontró un ciudadano con esta cédula',
                        confirmButtonText: 'Aceptar'
                    });
                }
            },
            error: function(xhr, status, error) {
                console.error('Error en la búsqueda:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Ocurrió un error al buscar la cédula',
                    confirmButtonText: 'Aceptar'
                });
            },
            complete: function() {
                $nombreInput.prop('disabled', false);
            }
        });
    }
}

// ... (rest of the file remains the same) ...
{% endblock %}
